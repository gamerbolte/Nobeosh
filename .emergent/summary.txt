<analysis>**original_problem_statement:**
The user wants to build a premium, modern, dark-themed e-commerce website for digital goods, inspired by ottsathi.com and gameshopnepal.com. The project has undergone multiple rapid iterations where the entire codebase was replaced with new user-provided GitHub repositories, requiring data preservation and re-implementation of features each time.

PRODUCT REQUIREMENTS:
- **Homepage:** Display customer reviews and a grid of products.
- **Product System:** Products with variations (e.g., different plans/prices). Admins should be able to edit and reorder these variations.
- **Checkout & Invoicing:** A detailed, multi-step flow is required:
    - On I have Paid, redirect the user to WhatsApp with a pre-filled, dynamically generated message containing the complete order summary.
    - Allow customers to upload a payment screenshot, which automatically updates the order status to Confirmed.
    - Admins must be able to view this screenshot in the order details.
    - Generate a unique, public invoice URL for each completed order.
    - Automatically email the invoice to the customer upon order completion.
- **Admin Panel:** A comprehensive, mobile-responsive admin panel to manage products, categories, reviews, blogs, FAQs, and orders.
- **Authentication:** Secure admin login (credentials in environment variables) and an OTP-based customer login system.
- **Integrations:** Trustpilot for reviews and Take.app for order syncing.

**User's preferred language**: English

**what currently exists?**
The application is running on a new codebase from the  GitHub repository, which was the latest of several full codebase swaps. All user data (products, orders, etc.) has been backed up and restored. The agent has performed multiple cycles of debugging, fixing issues reported by the user and found through linting/testing. This includes fixing Python errors, resolving deployment blockers (hardcoded secrets, .gitignore issues), fixing business logic for store credits and profit calculations, and attempting to fix a persistent bug in the admin staff management section.

**Last working item**:
-   **Last item agent was working:** Debugging a persistent Admin not found error that occurs when the main admin () tries to update staff member details. The agent has made several attempts to fix this by standardizing the use of a custom uid=0(root) gid=0(root) groups=0(root) field instead of MongoDB's default  across the backend API, as this inconsistency was identified as the likely root cause.
-   **Status:** USER VERIFICATION PENDING
-   **Agent Testing Done:** Y (Local tests for creating, updating, and deleting staff members passed successfully after the latest fix.)
-   **Which testing method agent to use?** Manual testing. The agent needs to ask the user to reproduce the error. If it persists, the agent must check the backend logs for the newly added debug statements to trace the exact IDs being used during the failed operation. A direct inspection of the  collection in the database will also be necessary.
-   **User Testing Done:** N (The user's last report on this was Still says admin not found, indicating previous fixes were not successful. Verification on the latest fix is pending.)

**All Pending/In progress Issue list**:
-   **Issue 1: Critical Admin not found error in staff management (Priority: P0)**
-   **Issue 2: Re-implement lost features due to codebase swaps (Priority: P1)**

**Issues Detail:**
-   **Issue 1: Critical Admin not found error in staff management**
    -   **Attempted fixes:**
        1.  Ensured the main admin () is created as a document in the  collection upon first login.
        2.  Modified all staff management endpoints (, , , ) in  to use a custom uid=0(root) gid=0(root) groups=0(root) field for lookups, instead of MongoDB's .
        3.  Added backward compatibility to the  endpoint to return both uid=0(root) gid=0(root) groups=0(root) and  to prevent frontend errors.
        4.  Added debug logs to the  and  functions to trace the IDs being used during the operation.
    -   **Next debug checklist:**
        1.  Restart the backend service to ensure all the latest code changes and logging are active.
        2.  Ask the user to try updating a staff member again.
        3.  Immediately after, check the backend logs for the  messages: ==> /var/log/supervisor/backend.err.log <==
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/backend/server.py", line 106, in security_headers_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/root/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/root/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 189, in __call__
    with collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/root/.venv/lib/python3.11/site-packages/starlette/_utils.py", line 93, in collapse_excgroups
    raise exc
  File "/root/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/backend/server.py", line 100, in rate_limit_middleware
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/root/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/root/.venv/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/root/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/root/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/root/.venv/lib/python3.11/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/.venv/lib/python3.11/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/root/.venv/lib/python3.11/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/root/.venv/lib/python3.11/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/root/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/root/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/root/.venv/lib/python3.11/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "/root/.venv/lib/python3.11/site-packages/fastapi/routing.py", line 296, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/.venv/lib/python3.11/site-packages/fastapi/routing.py", line 180, in serialize_response
    return jsonable_encoder(response_content)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/.venv/lib/python3.11/site-packages/fastapi/encoders.py", line 287, in jsonable_encoder
    encoded_value = jsonable_encoder(
                    ^^^^^^^^^^^^^^^^^
  File "/root/.venv/lib/python3.11/site-packages/fastapi/encoders.py", line 287, in jsonable_encoder
    encoded_value = jsonable_encoder(
                    ^^^^^^^^^^^^^^^^^
  File "/root/.venv/lib/python3.11/site-packages/fastapi/encoders.py", line 330, in jsonable_encoder
    raise ValueError(errors) from e
ValueError: [TypeError("'ObjectId' object is not iterable"), TypeError('vars() argument must have __dict__ attribute')]
WARNING:  WatchFiles detected changes in 'server.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [768]
INFO:     Started server process [928]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'server.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [928]
INFO:     Started server process [1350]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'server.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [1350]
INFO:     Started server process [1366]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'server.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [1366]
INFO:     Started server process [1403]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
2026-02-15 13:39:56,913 - server - INFO - Updating admin with id: admin_testuser1
INFO:     Will watch for changes in these directories: ['/app/backend']
INFO:     Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
INFO:     Started reloader process [46] using WatchFiles
INFO:     Started server process [90]
INFO:     Waiting for application startup.
INFO:     Application startup complete.

==> /var/log/supervisor/backend.out.log <==
INFO:     10.208.161.194:59642 - "GET /api/products?active_only=true HTTP/1.1" 200 OK
INFO:     10.208.161.194:59642 - "GET /api/blog HTTP/1.1" 200 OK
INFO:     10.208.161.194:59642 - "GET /api/categories HTTP/1.1" 200 OK
INFO:     10.208.169.202:54454 - "GET /api/payment-methods HTTP/1.1" 200 OK
INFO:     10.208.169.194:37142 - "GET /api/reviews HTTP/1.1" 200 OK
INFO:     10.208.161.194:59632 - "GET /api/notification-bar HTTP/1.1" 200 OK
INFO:     10.208.161.194:59652 - "GET /api/social-links HTTP/1.1" 200 OK
INFO:     10.208.169.194:37142 - "GET /api/products?active_only=true HTTP/1.1" 200 OK
INFO:     10.208.169.202:54454 - "GET /api/wishlist/v_bxkltrbnpmldv1zy4 HTTP/1.1" 200 OK
INFO:     10.208.169.194:52346 - "GET /api/daily-reward/settings HTTP/1.1" 200 OK
INFO:     10.208.161.194:47952 - "GET /api/multiplier/active HTTP/1.1" 200 OK
INFO:     10.208.161.194:47952 - "GET /api/social-links HTTP/1.1" 200 OK
INFO:     10.208.169.202:34224 - "GET /api/referral/settings HTTP/1.1" 200 OK
INFO:     10.208.169.194:52346 - "GET /api/daily-reward/settings HTTP/1.1" 200 OK
INFO:     10.208.161.194:47952 - "GET /api/social-links HTTP/1.1" 200 OK
INFO:     10.208.161.194:47960 - "GET /api/referral/settings HTTP/1.1" 200 OK
INFO:     10.208.161.194:47960 - "GET /api/multiplier/active HTTP/1.1" 200 OK
INFO:     10.208.169.194:56252 - "GET /api/products HTTP/1.1" 200 OK
INFO:     10.208.169.202:48354 - "GET /api/categories HTTP/1.1" 200 OK
INFO:     10.208.169.194:56252 - "GET /api/reviews HTTP/1.1" 200 OK
INFO:     10.208.169.194:56252 - "GET /api/payment-methods HTTP/1.1" 200 OK
INFO:     10.208.169.194:56252 - "GET /api/faqs HTTP/1.1" 200 OK
INFO:     10.208.169.202:48354 - "GET /api/blog HTTP/1.1" 200 OK
INFO:     10.208.169.194:56252 - "GET /api/social-links HTTP/1.1" 200 OK
INFO:     10.208.169.194:56252 - "GET /api/notification-bar HTTP/1.1" 200 OK
INFO:     10.208.169.202:48354 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     10.208.169.202:48354 - "GET /api/orders HTTP/1.1" 200 OK
INFO:     10.208.169.202:48354 - "GET /api/analytics/overview HTTP/1.1" 200 OK
INFO:     10.208.169.194:56252 - "GET /api/permissions HTTP/1.1" 200 OK
INFO:     10.208.169.202:48902 - "GET /api/products HTTP/1.1" 200 OK
INFO:     10.208.169.194:59890 - "GET /api/categories HTTP/1.1" 200 OK
INFO:     10.208.169.194:59890 - "GET /api/reviews HTTP/1.1" 200 OK
INFO:     10.208.169.194:59890 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     10.208.169.194:36776 - "POST /api/track-visit HTTP/1.1" 200 OK
INFO:     10.208.169.194:36776 - "POST /api/track-visit HTTP/1.1" 200 OK
INFO:     10.208.169.202:46472 - "GET /api/categories HTTP/1.1" 200 OK
INFO:     10.208.169.202:46464 - "GET /api/social-links HTTP/1.1" 200 OK
INFO:     10.208.161.194:48338 - "GET /api/notification-bar HTTP/1.1" 200 OK
INFO:     10.208.161.194:48336 - "GET /api/products?active_only=true HTTP/1.1" 200 OK
INFO:     10.208.169.202:46474 - "GET /api/reviews HTTP/1.1" 200 OK
INFO:     10.208.169.202:46494 - "GET /api/blog HTTP/1.1" 200 OK
INFO:     10.208.169.202:46502 - "GET /api/wishlist/v_my06dfaeomlm5wy1i HTTP/1.1" 200 OK
INFO:     10.208.169.202:46484 - "GET /api/payment-methods HTTP/1.1" 200 OK
INFO:     10.208.169.202:46464 - "GET /api/categories HTTP/1.1" 200 OK
INFO:     10.208.161.194:48336 - "GET /api/social-links HTTP/1.1" 200 OK
INFO:     10.208.169.194:36776 - "GET /api/products?active_only=true HTTP/1.1" 200 OK
INFO:     10.208.161.194:48338 - "GET /api/wishlist/v_my06dfaeomlm5wy1i HTTP/1.1" 200 OK
INFO:     10.208.169.202:46464 - "GET /api/blog HTTP/1.1" 200 OK
INFO:     10.208.169.194:36794 - "GET /api/notification-bar HTTP/1.1" 200 OK
INFO:     10.208.169.194:36796 - "GET /api/reviews HTTP/1.1" 200 OK
INFO:     10.208.169.194:36782 - "GET /api/payment-methods HTTP/1.1" 200 OK
INFO:     10.208.169.194:40654 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     10.208.161.194:33970 - "GET /api/admins HTTP/1.1" 200 OK
INFO:     10.208.169.194:55436 - "POST /api/auth/login HTTP/1.1" 500 Internal Server Error
INFO:     10.208.161.194:54084 - "POST /api/admins HTTP/1.1" 403 Forbidden
INFO:     10.208.139.130:36298 - "GET /api/admins HTTP/1.1" 403 Forbidden
INFO:     10.208.139.130:36298 - "PUT /api/admins/admin_teststaff HTTP/1.1" 403 Forbidden
INFO:     10.208.139.130:36298 - "DELETE /api/admins/admin_teststaff HTTP/1.1" 403 Forbidden
INFO:     10.208.139.130:45812 - "POST /api/auth/login HTTP/1.1" 500 Internal Server Error
INFO:     10.208.161.194:41102 - "GET /api/admins HTTP/1.1" 403 Forbidden
INFO:     10.208.139.130:45828 - "POST /api/admins HTTP/1.1" 403 Forbidden
INFO:     10.208.139.130:45828 - "PUT /api/admins/admin_staff1 HTTP/1.1" 403 Forbidden
INFO:     10.208.139.130:45828 - "GET /api/admins HTTP/1.1" 403 Forbidden
INFO:     10.208.169.211:38894 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     10.208.161.194:54010 - "GET /api/admins HTTP/1.1" 200 OK
INFO:     10.208.161.194:54010 - "POST /api/admins HTTP/1.1" 500 Internal Server Error
INFO:     10.208.139.130:57678 - "PUT /api/admins/admin_staff2 HTTP/1.1" 200 OK
INFO:     10.208.161.194:54022 - "DELETE /api/admins/admin_staff2 HTTP/1.1" 200 OK
INFO:     10.208.139.130:41630 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     10.208.139.130:41630 - "POST /api/admins HTTP/1.1" 200 OK
INFO:     10.208.161.194:42096 - "GET /api/admins HTTP/1.1" 200 OK
INFO:     10.208.139.130:41630 - "PUT /api/admins/admin_newstaff HTTP/1.1" 200 OK
INFO:     10.208.139.130:41630 - "DELETE /api/admins/admin_newstaff HTTP/1.1" 200 OK
INFO:     10.208.161.194:36046 - "GET /api/products?active_only=true HTTP/1.1" 200 OK
INFO:     10.208.139.130:51600 - "GET /api/blog HTTP/1.1" 200 OK
INFO:     10.208.161.194:36046 - "POST /api/track-visit HTTP/1.1" 200 OK
INFO:     10.208.169.194:54056 - "GET /api/social-links HTTP/1.1" 200 OK
INFO:     10.208.161.194:36046 - "GET /api/wishlist/v_8iuz1wd5cmlns0tk9 HTTP/1.1" 200 OK
INFO:     10.208.169.211:51728 - "GET /api/reviews HTTP/1.1" 200 OK
INFO:     10.208.169.211:51718 - "GET /api/notification-bar HTTP/1.1" 200 OK
INFO:     10.208.161.194:36052 - "GET /api/categories HTTP/1.1" 200 OK
INFO:     10.208.169.194:54056 - "POST /api/track-visit HTTP/1.1" 200 OK
INFO:     10.208.139.130:51600 - "GET /api/payment-methods HTTP/1.1" 200 OK
INFO:     10.208.161.194:52218 - "POST /api/track-visit HTTP/1.1" 200 OK
INFO:     10.208.169.194:49078 - "POST /api/track-visit HTTP/1.1" 200 OK
INFO:     10.208.169.211:46208 - "GET /api/categories HTTP/1.1" 200 OK
INFO:     10.208.161.194:52220 - "GET /api/social-links HTTP/1.1" 200 OK
INFO:     10.208.169.211:46208 - "GET /api/wishlist/v_8iuz1wd5cmlns0tk9 HTTP/1.1" 200 OK
INFO:     10.208.161.194:52218 - "GET /api/products?active_only=true HTTP/1.1" 200 OK
INFO:     10.208.169.194:49078 - "GET /api/reviews HTTP/1.1" 200 OK
INFO:     10.208.139.130:34824 - "GET /api/payment-methods HTTP/1.1" 200 OK
INFO:     10.208.161.194:52218 - "GET /api/blog HTTP/1.1" 200 OK
INFO:     10.208.139.130:34824 - "GET /api/notification-bar HTTP/1.1" 200 OK
INFO:     10.208.169.194:53178 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     10.208.169.211:46032 - "GET /api/admins HTTP/1.1" 200 OK
INFO:     10.208.139.130:38752 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     10.208.161.194:58446 - "GET /api/admins HTTP/1.1" 200 OK
INFO:     10.208.161.194:58446 - "POST /api/admins HTTP/1.1" 200 OK
INFO:     10.208.169.194:35366 - "PUT /api/admins/admin_testuser1 HTTP/1.1" 200 OK
INFO:     10.208.161.194:58446 - "DELETE /api/admins/admin_testuser1 HTTP/1.1" 200 OK. Look for DEBUG: Updating admin with ID:, DEBUG: Found current user in DB:, and DEBUG: Current user performing action:.
        4.  Inspect the entire  collection to check the data structure of existing staff members: .
        5.  Review  in  and the corresponding call in  to ensure perfect alignment.
    -   **Why fix this issue and what will be achieved with the fix?** This is a critical bug blocking a core administrative function, preventing the user from managing staff permissions.
    -   **Status:** IN PROGRESS
    -   **Is recurring issue?** Y
    -   **Should Test frontend/backend/both after fix?** Backend
    -   **Blocked on other issue:** None

**In progress Task List**:
-   None.

**Upcoming and Future Tasks**
- **Upcoming Tasks:**
  - **(P0) Re-implement Checkout & Invoicing Flow:** This is the most significant feature from the original requirements that was lost during codebase swaps. It needs to be re-implemented from scratch, including the WhatsApp redirect, screenshot upload for order confirmation, and invoice generation/emailing.
  - **(P1) Re-implement Product Variation Editing:** The ability for admins to edit and reorder product variations from the admin panel needs to be restored.
  - **(P2) Enhance FAQ Page:** The functionality to group FAQs by category and add a search bar needs to be re-implemented.

- **Future Tasks:**
  - Live purchase ticker
  - Bundle Deals section
  - Loyalty/Rewards Program
  - Referral System
  - Order Tracking Page
  - Sales Analytics Dashboard

**Completed work in this session**
- **Multiple Full Codebase Migrations:** Successfully replaced the application codebase multiple times (, , , ), preserving and restoring user data from MongoDB with each swap.
- **Bug Fixes:**
  - Resolved a critical JavaScript error that caused a blank screen on the frontend.
  - Fixed a recurring deployment blocker by ensuring a static  is used.
  - Fixed profit analytics calculations to be case-insensitive to order status (e.g., Completed vs. completed) and rounded all currency values in the UI.
  - Implemented the correct store credit logic (deduct credits on payment confirmation, award cashback on order completion).
  - Fixed staff permission seeding and implemented support for multiple QR codes on payment methods.
  - Resolved numerous Python linting errors and optimized several database queries to fix N+1 issues.
- **Deployment Readiness:**
  - Removed hardcoded credentials (e.g., Google Service Account) from the codebase and moved them to environment variables.
  - Corrected  file to prevent it from blocking necessary  files during deployment.

**Earlier issues found/mentioned but not fixed**
-   All previously known minor issues were wiped out by the frequent codebase replacements. The main pending work is the re-implementation of lost features.

**Known issue recurrence from previous fork**
-   **ID vs _id Field Confusion:** A recurring problem where the application logic inconsistently uses MongoDB's default  and a custom uid=0(root) gid=0(root) groups=0(root) string field for document lookups. This is the root cause of the current Admin not found bug and has caused issues in the past. The production database likely contains data with mixed formats from previous code versions.

**Code Architecture**


**Key Technical Concepts**
- **Backend**: FastAPI, Python, Motor (async MongoDB driver)
- **Frontend**: React, Tailwind CSS, Shadcn UI, Axios
- **Database**: MongoDB
- **Authentication**: Admin (JWT with a hardcoded fallback for ), Customer (Email OTP)

**key DB schema**
-   **admins**: uid=0(root) gid=0(root) groups=0(root) (string),  (string),  (string, hashed),  (string, 'main_admin' or 'staff'),  (list of strings).
-   **orders**: uid=0(root) gid=0(root) groups=0(root) (string, UUID),  (string),  (list),  (float),  (dict).
-   **products**:  (string),  (string),  (list of dicts, including optional ).

**All files of reference**
-   : The monolithic backend file. The current bug involves the , , , and  functions.
-   : The frontend component for managing staff, containing the API calls that are failing for the user.
-   : Defines credentials, including the fallback  and .

**Critical Info for New Agent**
-   **Your immediate priority is the Admin not found bug.** The user is blocked. Your first step should be to use the debug logs added by the previous agent to diagnose the issue after the user reproduces it. The problem is almost certainly related to inconsistent ID fields ( vs. uid=0(root) gid=0(root) groups=0(root)) between the code and the data in the production database.
-   **The codebase has been swapped many times.** Be prepared for inconsistencies and lost features. The most critical missing feature is the entire checkout/invoicing flow.
-   **Do not trust local testing alone.** The previous agent's fixes worked locally but failed for the user. The production data is the source of truth for debugging this issue.

**documents and test reports created in this job**
-   : Contains a high-level overview of the project, but may be out of sync due to codebase swaps.
-   Test reports from  are located in .

**Last 10 User Messages and any pending HUMAN messages**
1.  **Still says admin not found**: User confirms the staff management bug is not fixed. (Status: Open)
2.  **When im in admin panel logged in...**: User provides a detailed report of the admin not found bug. (Status: In Progress)
3.  **Use deployment agent...**: Request to check for deployment issues. (Status: Completed, issues fixed)
4.  **https://github.com/gamerbolte/ganbro copy...**: The latest request to replace the entire codebase. (Status: Completed)
5.  **The store credit should deduct from customer account...**: Request to fix store credit logic. (Status: Completed, fixed)
6.  **https://github.com/gamerbolte/ganguli copy...**: A previous request to replace the codebase. (Status: Completed)
7.  **round up the numbers...**: Request to fix number formatting and profit calculations. (Status: Completed, fixed)
8.  **fix issues**: Generic request to fix deployment blockers. (Status: Completed)
9.  **debugg and fix errors before i deploy**: General request to find and fix bugs. (Status: Completed)
10. **https://github.com/gamerbolte/nglbro/ copy**: Another previous request to replace the codebase. (Status: Completed)

**Project Health Check:**
-   **Broken**: Yes. A core admin feature (staff management) is non-functional for the user, preventing them from managing their team's permissions.

**3rd Party Integrations**
-   **ImgBB**: Used for hosting uploaded images (like payment screenshots). API key is in .
-   **Google Sheets**: Integrated for order syncing, but the credentials provided in the repo were invalid. The code was fixed to use environment variables, but the functionality is likely broken due to the bad credentials.
-   **Trustpilot**: Mentioned in requirements, but implementation status in the current codebase is unknown.
-   **Take.app**: Mentioned in requirements, but implementation status in the current codebase is unknown.

**Testing status**
-   **Testing agent used after significant changes**: YES
-   **Troubleshoot agent used after agent stuck in loop**: NO
-   **Test files created**: None.
-   **Known regressions**: Major features like the **Checkout/Invoicing Flow** and **Product Variation Editing** have been lost due to codebase swaps and need to be re-implemented.

**Credentials to test flow:**
-   **Admin URL:** 
-   **Username:** 
-   **Password:** 

**What agent forgot to execute**
- The agent has repeatedly fixed the admin not found issue based on local tests, but has not successfully resolved it for the user's production environment. The next step MUST involve analyzing the production data and logs, rather than assuming a local fix will work.</analysis>
